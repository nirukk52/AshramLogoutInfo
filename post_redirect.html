<!DOCTYPE html>
<html>
<head>
    <title>Redirecting to Post...</title>
</head>
<body>
<p>If you are not automatically redirected, <a id="appLink" href="#">click here</a>.</p>
<script>
    function getQueryParam(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }

    const postId = getQueryParam('postId');
    const appLink = document.getElementById('appLink');

    if (postId) {
        const appUrl = `laharisahitya://post/${postId}`;
        window.location.replace(appUrl); // Attempt automatic redirect
        appLink.href = appUrl; // Set the href for the manual link

        // Try setting window.location.href on the link click as well
        appLink.addEventListener('click', function(event) {
            event.preventDefault(); // Prevent the default link behavior
            window.location.href = appUrl;
        });

    } else {
        appLink.textContent = 'Link error: Post ID missing';
        appLink.href = '#error';
    }
</script>
</body>
</html>